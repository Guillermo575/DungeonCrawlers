<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>Battle</name>
    <events>
        <comment>Destroy impact if it hit with a wall</comment>
        <event-block sid="908892128050265">
            <conditions>
                <condition id="0" name="On collision with another object" sid="793874272242173" type="Family_Impact">
                    <param id="0" name="Object">Tilemap_Solid</param>
                </condition>
                <condition id="-7" name="Compare instance variable" sid="307761040992869" type="Family_Impact">
                    <param id="0" name="Instance variable">TypeObject</param>
                    <param id="1" name="Comparison">0</param>
                    <param id="2" name="Value">&quot;Projectile&quot;</param>
                </condition>
                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="400733695170605" type="Family_Impact">
                    <param id="0" name="Instance variable">Impact_PierceWalls</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="306932521941604" type="Function">
                    <param id="0" name="Name">Family_Impact.Impact_CollitionFunction</param>
                    <param id="1" name="Parameter {n}">Family_Impact.UID</param>
                </action>
                <action id="-9" name="Destroy" sid="341764997936552" type="Family_Impact" />
            </actions>
        </event-block>
        <comment>Destroy impact if it outside of the layout (only projectiles)</comment>
        <event-block sid="507754005488981">
            <conditions>
                <condition id="-4" name="Is outside layout" sid="310674556411250" type="Family_Impact" />
                <condition id="-7" name="Compare instance variable" sid="354612107479466" type="Family_Impact">
                    <param id="0" name="Instance variable">TypeObject</param>
                    <param id="1" name="Comparison">0</param>
                    <param id="2" name="Value">&quot;Projectile&quot;</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="548027863579092" type="Function">
                    <param id="0" name="Name">Family_Impact.Impact_CollitionFunction</param>
                    <param id="1" name="Parameter {n}">Family_Impact.UID</param>
                </action>
                <action id="-9" name="Destroy" sid="761197125525776" type="Family_Impact" />
            </actions>
        </event-block>
        <comment>Destroy impact if it timer goes out</comment>
        <event-block sid="342651800088982">
            <conditions>
                <condition behavior="Timer" id="0" name="On timer" sid="892378038690095" type="Family_Impact">
                    <param id="0" name="Tag">&quot;Destroy&quot;</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="294754441693094" type="Function">
                    <param id="0" name="Name">Family_Impact.Impact_CollitionFunction</param>
                    <param id="1" name="Parameter {n}">Family_Impact.UID</param>
                </action>
                <action id="-9" name="Destroy" sid="566215229444380" type="Family_Impact" />
            </actions>
        </event-block>
        <comment>Destroy impact if hit with a character hitbox</comment>
        <event-block sid="206087095416882">
            <conditions>
                <condition id="1" name="Is overlapping another object" sid="438280970888111" type="Family_Impact">
                    <param id="0" name="Object">Character_Hitbox</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="503755670587022" type="Family_Character">
                    <param id="0" name="Unique ID">Character_Hitbox.Pin2.PinnedUID</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="961380092551298" type="Function">
                    <param id="0" name="Name">&quot;CheckImpact&quot;</param>
                    <param id="1" name="Parameter {n}">Family_Character.UID{###}Family_Impact.UID</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="565032069764347">
            <conditions>
                <condition id="0" name="On collision with another object" sid="482065111708316" type="Family_Impact">
                    <param id="0" name="Object">Character_Hitbox</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="297504373850169" type="Family_Character">
                    <param id="0" name="Unique ID">Character_Hitbox.Pin2.PinnedUID</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="507704179521488" type="Function">
                    <param id="0" name="Name">&quot;CheckImpact&quot;</param>
                    <param id="1" name="Parameter {n}">Family_Character.UID{###}Family_Impact.UID</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="834533015282463">
            <conditions>
                <condition id="0" name="On function" sid="721825278057042" type="Function">
                    <param id="0" name="Name">&quot;CheckImpact&quot;</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="242208045971910" type="Family_Character">
                    <param id="0" name="Unique ID">Function.Param(0)</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="186641408418175" type="Family_Impact">
                    <param id="0" name="Unique ID">Function.Param(1)</param>
                </condition>
                <condition id="-7" name="Compare instance variable" sid="855568315442512" type="Family_Impact">
                    <param id="0" name="Instance variable">Group</param>
                    <param id="1" name="Comparison">1</param>
                    <param id="2" name="Value">Family_Character.TypeRole</param>
                </condition>
                <condition id="-8" name="Is boolean instance variable set" sid="725541435817637" type="Family_Character">
                    <param id="0" name="Instance variable">IsAlive</param>
                </condition>
                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="785212794373141" type="Family_Character">
                    <param id="0" name="Instance variable">PushRecoil</param>
                </condition>
                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="963912765301348" type="Family_Character">
                    <param id="0" name="Instance variable">Invencible</param>
                </condition>
                <condition id="-8" name="Is boolean instance variable set" sid="463262242797593" type="Family_Impact">
                    <param id="0" name="Instance variable">MakeDamage</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <variable constant="0" name="MakeImpact" sid="198677178091717" static="0" type="number">0</variable>
                <event-block sid="705982683669996">
                    <conditions>
                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="491131618149917" type="Family_Impact">
                            <param id="0" name="Instance variable">DodgeJump</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="519714945418064" type="System">
                            <param id="0" name="Variable">MakeImpact</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="986779696942509">
                    <conditions>
                        <condition id="-22" name="Else" sid="733664472471307" type="System" />
                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="956736486627854" type="Family_Character">
                            <param id="0" name="Instance variable">IsJumping</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="761839977455770" type="System">
                            <param id="0" name="Variable">MakeImpact</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="357644379537804">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="106631618329964" type="System">
                            <param id="0" name="Variable">MakeImpact</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="814661169279345" type="Function">
                            <param id="0" name="Name">Family_Impact.Impact_CollitionFunction</param>
                            <param id="1" name="Parameter {n}">Family_Impact.UID</param>
                        </action>
                        <action id="0" name="Call function" sid="747718362839461" type="Function">
                            <param id="0" name="Name">&quot;FlashCharacter&quot;</param>
                            <param id="1" name="Parameter {n}">Family_Character.UID{###}Family_Impact.Impact_RecoilTime</param>
                        </action>
                        <action id="0" name="Call function" sid="967449726092693" type="Function">
                            <param id="0" name="Name">&quot;PushCharacter&quot;</param>
                            <param id="1" name="Parameter {n}">Family_Character.UID{###}Family_Impact.UID</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="894662901775146">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="403929676660884" type="Family_Impact">
                                    <param id="0" name="Instance variable">TypeObject</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;Projectile&quot;</param>
                                </condition>
                                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="589340889930584" type="Family_Impact">
                                    <param id="0" name="Instance variable">Impact_PierceCharacters</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="586631943719204" type="Family_Impact" />
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <comment>Push the character from an impact</comment>
        <event-block sid="618366014873638">
            <conditions>
                <condition id="0" name="On function" sid="864806781082333" type="Function">
                    <param id="0" name="Name">&quot;PushCharacter&quot;</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="919969423892829" type="Family_Character">
                    <param id="0" name="Unique ID">Function.Param(0)</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="965941337016994" type="Family_Impact">
                    <param id="0" name="Unique ID">Function.Param(1)</param>
                </condition>
                <condition id="-8" name="Is boolean instance variable set" sid="192084388431945" type="Family_Character">
                    <param id="0" name="Instance variable">IsAlive</param>
                </condition>
                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="465467727712528" type="Family_Character">
                    <param id="0" name="Instance variable">PushRecoil</param>
                </condition>
                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="476667014054515" type="Family_Character">
                    <param id="0" name="Instance variable">Invencible</param>
                </condition>
            </conditions>
            <actions>
                <action id="-13" name="Set boolean" sid="698638065186884" type="Family_Character">
                    <param id="0" name="Instance variable">PushRecoil</param>
                    <param id="1" name="Value">1</param>
                </action>
                <action behavior="FC_Timer" id="0" name="Start timer" sid="170706894065174" type="Family_Character">
                    <param id="0" name="Duration">Family_Impact.Impact_RecoilTime</param>
                    <param id="1" name="Type">0</param>
                    <param id="2" name="Tag">&quot;Recoil&quot;</param>
                </action>
                <action id="-12" name="Subtract from" sid="417315061648505" type="Family_Character">
                    <param id="0" name="Instance variable">Hp</param>
                    <param id="1" name="Value">Family_Impact.Impact_Damage &lt;= 0? 1 : Family_Impact.Impact_Damage</param>
                </action>
                <action id="0" name="Spawn another object" sid="992430191717126" type="Family_Character">
                    <param id="0" name="Object">SpriteFontDamage</param>
                    <param id="1" name="Layer">Family_Character.LayerName</param>
                    <param id="2" name="Image point">0</param>
                </action>
                <action id="-8" name="Set angle" sid="259534934350089" type="SpriteFontDamage">
                    <param id="0" name="Angle">0</param>
                </action>
                <action id="0" name="Set text" sid="861783031906815" type="SpriteFontDamage">
                    <param id="0" name="Text">Family_Impact.Impact_Damage &lt;= 0? 1 : Family_Impact.Impact_Damage</param>
                </action>
                <action id="-28" name="Set effect parameter" sid="580520486248927" type="SpriteFontDamage">
                    <param id="0" name="Effect">&quot;SetColor&quot;</param>
                    <param id="1" name="Parameter index">0</param>
                    <param id="2" name="Value">100</param>
                </action>
            </actions>
            <sub-events>
                <event-block sid="193527849554877">
                    <conditions>
                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="948418780984583" type="Family_Character">
                            <param id="0" name="Instance variable">Unstopable</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="550905929753114">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="498259823081359" type="Family_Impact">
                                    <param id="0" name="Instance variable">PassivePush</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="FC_Bullet" id="0" name="Set speed" sid="308503064255257" type="Family_Character">
                                    <param id="0" name="Speed">Family_Impact.Impact_PushImpact</param>
                                </action>
                                <action behavior="FC_Bullet" id="3" name="Set angle of motion" sid="523645896858496" type="Family_Character">
                                    <param id="0" name="Angle">Family_Character.LastDirectionAngle + 180</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="270252971588300">
                            <conditions>
                                <condition id="-22" name="Else" sid="993818125090453" type="System" />
                            </conditions>
                            <actions>
                                <action behavior="FC_Bullet" id="0" name="Set speed" sid="756538370496436" type="Family_Character">
                                    <param id="0" name="Speed">Family_Impact.Impact_PushImpact</param>
                                </action>
                                <action behavior="FC_Bullet" id="3" name="Set angle of motion" sid="203832232549511" type="Family_Character">
                                    <param id="0" name="Angle">Family_Impact.FI_Bullet.AngleOfMotion</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <comment>this stop the push if it hits with a wall, this avoid it to pass to the other side of the wall</comment>
        <event-block sid="101647528571160">
            <conditions>
                <condition id="0" name="On collision with another object" sid="296975085036275" type="Family_Character">
                    <param id="0" name="Object">Tilemap_Solid</param>
                </condition>
                <condition behavior="FC_Bullet" id="0" name="Compare speed" sid="418990552126311" type="Family_Character">
                    <param id="0" name="Comparison">4</param>
                    <param id="1" name="Speed">0</param>
                </condition>
            </conditions>
            <actions>
                <action behavior="FC_Bullet" id="0" name="Set speed" sid="196440691637224" type="Family_Character">
                    <param id="0" name="Speed">0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="325538702868373">
            <conditions>
                <condition id="1" name="Is overlapping another object" sid="293350645358959" type="Family_Character">
                    <param id="0" name="Object">Tilemap_Solid</param>
                </condition>
                <condition behavior="FC_Bullet" id="0" name="Compare speed" sid="637192197205784" type="Family_Character">
                    <param id="0" name="Comparison">4</param>
                    <param id="1" name="Speed">0</param>
                </condition>
            </conditions>
            <actions>
                <action behavior="FC_Bullet" id="0" name="Set speed" sid="203795629252198" type="Family_Character">
                    <param id="0" name="Speed">0</param>
                </action>
            </actions>
        </event-block>
        <comment>When the character stop to push, it has N time of invincibility</comment>
        <event-block sid="676507596591997">
            <conditions>
                <condition behavior="FC_Timer" id="0" name="On timer" sid="953768221970047" type="Family_Character">
                    <param id="0" name="Tag">&quot;Recoil&quot;</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="687072568767184" type="Function">
                    <param id="0" name="Name">&quot;FlashCharacter&quot;</param>
                    <param id="1" name="Parameter {n}">Family_Character.UID{###}Family_Character.InvencibleTime</param>
                </action>
                <action behavior="FC_Timer" id="0" name="Start timer" sid="317838152768189" type="Family_Character">
                    <param id="0" name="Duration">Family_Character.InvencibleTime</param>
                    <param id="1" name="Type">0</param>
                    <param id="2" name="Tag">&quot;Invencible&quot;</param>
                </action>
                <action id="-13" name="Set boolean" sid="312752493386350" type="Family_Character">
                    <param id="0" name="Instance variable">Invencible</param>
                    <param id="1" name="Value">1</param>
                </action>
                <action id="-13" name="Set boolean" sid="406835581839973" type="Family_Character">
                    <param id="0" name="Instance variable">PushRecoil</param>
                    <param id="1" name="Value">0</param>
                </action>
            </actions>
            <sub-events>
                <event-block sid="942969982130454">
                    <conditions>
                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="660868688547138" type="Family_Character">
                            <param id="0" name="Instance variable">Unstopable</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="FC_Bullet" id="0" name="Set speed" sid="503352783793493" type="Family_Character">
                            <param id="0" name="Speed">0</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <comment>This cancel the invincibility</comment>
        <event-block sid="999799898026819">
            <conditions>
                <condition behavior="FC_Timer" id="0" name="On timer" sid="358870693389360" type="Family_Character">
                    <param id="0" name="Tag">&quot;Invencible&quot;</param>
                </condition>
            </conditions>
            <actions>
                <action id="-13" name="Set boolean" sid="214406096643306" type="Family_Character">
                    <param id="0" name="Instance variable">Invencible</param>
                    <param id="1" name="Value">0</param>
                </action>
            </actions>
        </event-block>
        <comment>Pick &amp; Drop pbject</comment>
        <event-block sid="140299108262705">
            <conditions>
                <condition id="0" name="On function" sid="516036946050898" type="Function">
                    <param id="0" name="Name">&quot;PickObject&quot;</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="672968642865808" type="Item_Generic">
                    <param id="0" name="Unique ID">Function.Param(1)</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="308610650426564" type="Family_Character">
                    <param id="0" name="Unique ID">Function.Param(0)</param>
                </condition>
                <condition id="-8" name="Is boolean instance variable set" sid="358910601872153" type="Item_Generic">
                    <param id="0" name="Instance variable">Loaded</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <variable constant="0" name="LeftObject" sid="939777729253534" static="0" type="number">0</variable>
                <variable constant="0" name="RightObject" sid="461994602066432" static="0" type="number">0</variable>
                <variable constant="0" name="NewObject" sid="218926582719296" static="0" type="number">0</variable>
                <event-block sid="432307196325197">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="676899769162676" type="Family_Character">
                            <param id="0" name="Instance variable">ArmLeft</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="736098454351695" type="Family_Character">
                            <param id="0" name="Instance variable">ArmLeft</param>
                            <param id="1" name="Value">Item_Generic.UID</param>
                        </action>
                        <action behavior="FO_Pin2" id="0" name="Pin to object" sid="762691346684513" type="Item_Generic">
                            <param id="0" name="Pin to">Family_Character</param>
                            <param id="1" name="Mode">5</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="333707942008967">
                    <conditions>
                        <condition id="-22" name="Else" sid="797384095046704" type="System" />
                        <condition id="-7" name="Compare instance variable" sid="605154586618278" type="Family_Character">
                            <param id="0" name="Instance variable">ArmRight</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="163872413758711" type="Family_Character">
                            <param id="0" name="Instance variable">ArmRight</param>
                            <param id="1" name="Value">Item_Generic.UID</param>
                        </action>
                        <action behavior="FO_Pin2" id="0" name="Pin to object" sid="108431474917453" type="Item_Generic">
                            <param id="0" name="Pin to">Family_Character</param>
                            <param id="1" name="Mode">5</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="199000607056559">
                    <conditions>
                        <condition id="-22" name="Else" sid="350371140034840" type="System" />
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="356921943687790" type="System">
                            <param id="0" name="Variable">LeftObject</param>
                            <param id="1" name="Value">Family_Character.ArmLeft</param>
                        </action>
                        <action id="-9" name="Set value" sid="236705716601580" type="System">
                            <param id="0" name="Variable">RightObject</param>
                            <param id="1" name="Value">Family_Character.ArmRight</param>
                        </action>
                        <action id="-9" name="Set value" sid="547104129321176" type="System">
                            <param id="0" name="Variable">NewObject</param>
                            <param id="1" name="Value">Item_Generic.UID</param>
                        </action>
                        <action id="-10" name="Set value" sid="960801116531332" type="Family_Character">
                            <param id="0" name="Instance variable">ArmLeft</param>
                            <param id="1" name="Value">NewObject</param>
                        </action>
                        <action id="-10" name="Set value" sid="735160480696756" type="Family_Character">
                            <param id="0" name="Instance variable">ArmRight</param>
                            <param id="1" name="Value">LeftObject</param>
                        </action>
                        <action behavior="FO_Pin2" id="0" name="Pin to object" sid="142982133222888" type="Item_Generic">
                            <param id="0" name="Pin to">Family_Character</param>
                            <param id="1" name="Mode">5</param>
                        </action>
                        <action id="0" name="Call function" sid="812246208572031" type="Function">
                            <param id="0" name="Name">&quot;DropObject&quot;</param>
                            <param id="1" name="Parameter {n}">RightObject</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="524274688862740">
                    <conditions>
                        <condition id="-8" name="Is boolean instance variable set" sid="574660617871417" type="Family_Character">
                            <param id="0" name="Instance variable">HideItems</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-15" name="Set visible" sid="156567201215118" type="Item_Generic">
                            <param id="0" name="Visibility">0</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="598583061870156">
            <conditions>
                <condition id="0" name="On function" sid="492924327643728" type="Function">
                    <param id="0" name="Name">&quot;DropObject&quot;</param>
                </condition>
                <condition id="-33" name="Pick by comparison" sid="904233992964027" type="System">
                    <param id="0" name="Object">Item_Generic</param>
                    <param id="1" name="Expression">Item_Generic.UID</param>
                    <param id="2" name="Comparison">0</param>
                    <param id="3" name="Value">Function.Param(0)</param>
                </condition>
            </conditions>
            <actions>
                <action behavior="FO_Pin2" id="1" name="Unpin" sid="662163658113570" type="Item_Generic" />
                <action id="-15" name="Set visible" sid="347350958429701" type="Item_Generic">
                    <param id="0" name="Visibility">1</param>
                </action>
            </actions>
        </event-block>
        <comment>Equip that object on left or right arm</comment>
        <event-block sid="400238477806966">
            <conditions>
                <condition id="0" name="On function" sid="447682629737049" type="Function">
                    <param id="0" name="Name">&quot;EquipObjectLeft&quot;</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="885258767391289" type="Item_Generic">
                    <param id="0" name="Unique ID">Function.Param(1)</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="517933661309332" type="Family_Character">
                    <param id="0" name="Unique ID">Function.Param(0)</param>
                </condition>
            </conditions>
            <actions>
                <action id="-10" name="Set value" sid="453341362376900" type="Family_Character">
                    <param id="0" name="Instance variable">ArmLeft</param>
                    <param id="1" name="Value">Item_Generic.UID</param>
                </action>
                <action behavior="FO_Pin2" id="0" name="Pin to object" sid="171408781050661" type="Item_Generic">
                    <param id="0" name="Pin to">Family_Character</param>
                    <param id="1" name="Mode">5</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="143315804187676">
            <conditions>
                <condition id="0" name="On function" sid="406788030179580" type="Function">
                    <param id="0" name="Name">&quot;EquipObjectRight&quot;</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="677225156063631" type="Item_Generic">
                    <param id="0" name="Unique ID">Function.Param(1)</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="493454569251619" type="Family_Character">
                    <param id="0" name="Unique ID">Function.Param(0)</param>
                </condition>
            </conditions>
            <actions>
                <action id="-10" name="Set value" sid="317695943937591" type="Family_Character">
                    <param id="0" name="Instance variable">ArmRight</param>
                    <param id="1" name="Value">Item_Generic.UID</param>
                </action>
                <action behavior="FO_Pin2" id="0" name="Pin to object" sid="762994440086018" type="Item_Generic">
                    <param id="0" name="Pin to">Family_Character</param>
                    <param id="1" name="Mode">5</param>
                </action>
            </actions>
        </event-block>
        <comment>Press &amp; Unpress Command functions</comment>
        <event-block sid="387483268612408">
            <conditions>
                <condition id="0" name="On function" sid="431047773237028" type="Function">
                    <param id="0" name="Name">&quot;Press_Object&quot;</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="892647934869110" type="Family_Item">
                    <param id="0" name="Unique ID">Function.Param(0)</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="726426655317386" type="Family_Arms">
                    <param id="0" name="Unique ID">Function.Param(1)</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="741667193622484" type="Scml_Player_Top">
                    <param id="0" name="Unique ID">Function.Param(2)</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="129207882975809" type="Family_Character">
                    <param id="0" name="Unique ID">Family_Item.FO_Pin2.PinnedUID</param>
                </condition>
                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="790709095638164" type="Family_Character">
                    <param id="0" name="Instance variable">PressButton</param>
                </condition>
            </conditions>
            <actions>
                <action id="-10" name="Set value" sid="845588682257880" type="Family_Character">
                    <param id="0" name="Instance variable">ActionCommand</param>
                    <param id="1" name="Value">Family_Item.Function_Param</param>
                </action>
                <action id="-10" name="Set value" sid="320968590402308" type="Family_Character">
                    <param id="0" name="Instance variable">ActionStep</param>
                    <param id="1" name="Value">0</param>
                </action>
                <action id="-10" name="Set value" sid="416122782311990" type="Family_Character">
                    <param id="0" name="Instance variable">LastArmUsed</param>
                    <param id="1" name="Value">Family_Arms.Type</param>
                </action>
                <action id="-13" name="Set boolean" sid="367709334550551" type="Family_Character">
                    <param id="0" name="Instance variable">PressButton</param>
                    <param id="1" name="Value">1</param>
                </action>
                <action id="-10" name="Set value" sid="712568947927347" type="Family_Character">
                    <param id="0" name="Instance variable">ActionObjectUsed</param>
                    <param id="1" name="Value">Family_Item.UID</param>
                </action>
                <action id="0" name="Call function" sid="320545483979331" type="Function">
                    <param id="0" name="Name">&quot;CallCommand&quot;</param>
                    <param id="1" name="Parameter {n}">Scml_Player_Top.UID</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="282479012498368">
            <conditions>
                <condition id="0" name="On function" sid="792484662633232" type="Function">
                    <param id="0" name="Name">&quot;UnPress_Object&quot;</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="371060792434565" type="Family_Item">
                    <param id="0" name="Unique ID">Function.Param(0)</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="617024158850632" type="Family_Arms">
                    <param id="0" name="Unique ID">Function.Param(1)</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="682260596800607" type="Scml_Player_Top">
                    <param id="0" name="Unique ID">Function.Param(2)</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="656591480481483" type="Family_Character">
                    <param id="0" name="Unique ID">Family_Item.FO_Pin2.PinnedUID</param>
                </condition>
                <condition id="-8" name="Is boolean instance variable set" sid="479220813795736" type="Family_Character">
                    <param id="0" name="Instance variable">PressButton</param>
                </condition>
            </conditions>
            <actions>
                <action id="-13" name="Set boolean" sid="506191288046807" type="Family_Character">
                    <param id="0" name="Instance variable">PressButton</param>
                    <param id="1" name="Value">0</param>
                </action>
            </actions>
        </event-block>
        <comment>Projectiles</comment>
        <event-block sid="833461755880054">
            <conditions>
                <condition behavior="FO_Timer" id="0" name="On timer" sid="925514805472925" type="Family_Item">
                    <param id="0" name="Tag">&quot;Shoot_Projectile&quot;</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="619620966020777" type="Family_Character">
                    <param id="0" name="Unique ID">Family_Item.FO_Pin2.PinnedUID</param>
                </condition>
                <condition id="-7" name="Compare instance variable" sid="651167090445688" type="Family_Item">
                    <param id="0" name="Instance variable">Projectile_AmmoSize</param>
                    <param id="1" name="Comparison">4</param>
                    <param id="2" name="Value">0</param>
                </condition>
            </conditions>
            <actions>
                <action id="-12" name="Subtract from" sid="367531849749154" type="Family_Item">
                    <param id="0" name="Instance variable">Projectile_AmmoSize</param>
                    <param id="1" name="Value">Family_Character.NoSpendMunition? 0 : Family_Item.Projectile_AmmoSpend</param>
                </action>
            </actions>
            <sub-events>
                <event-block sid="628047493207284">
                    <conditions>
                        <condition id="-10" name="For" sid="948458388961645" type="System">
                            <param id="0" name="Name">&quot;AmmoXShoot&quot;</param>
                            <param id="1" name="Start index">0</param>
                            <param id="2" name="End index">Family_Item.Projectile_AmmoXShoot - 1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Spawn another object" sid="739135910237827" type="Family_Item">
                            <param id="0" name="Object">Impact_Generic</param>
                            <param id="1" name="Layer">&quot;Characters&quot;</param>
                            <param id="2" name="Image point">1</param>
                        </action>
                        <action id="4" name="Set animation" sid="930353163821459" type="Impact_Generic">
                            <param id="0" name="Animation">Family_Item.Projectile_Animation</param>
                            <param id="1" name="From">1</param>
                        </action>
                        <action id="-10" name="Set value" sid="807281521553950" type="Impact_Generic">
                            <param id="0" name="Instance variable">Group</param>
                            <param id="1" name="Value">Family_Character.TypeRole</param>
                        </action>
                        <action id="-10" name="Set value" sid="878942395763345" type="Impact_Generic">
                            <param id="0" name="Instance variable">TypeObject</param>
                            <param id="1" name="Value">&quot;Projectile&quot;</param>
                        </action>
                        <action behavior="Timer" id="0" name="Start timer" sid="737434007205443" type="Impact_Generic">
                            <param id="0" name="Duration">Impact_Generic.Impact_Duration</param>
                            <param id="1" name="Type">0</param>
                            <param id="2" name="Tag">&quot;Destroy&quot;</param>
                        </action>
                        <action id="-8" name="Set angle" sid="508227509305923" type="Impact_Generic">
                            <param id="0" name="Angle">Family_Character.LastDirectionAngle + ((30*int((loopindex+1)/2)) * (loopindex % 2 = 0 ? -1 : 1))</param>
                        </action>
                        <action behavior="FI_Bullet" id="3" name="Set angle of motion" sid="874337554331397" type="Impact_Generic">
                            <param id="0" name="Angle">Family_Character.LastDirectionAngle + ((30*int((loopindex+1)/2)) * (loopindex % 2 = 0 ? -1 : 1))</param>
                        </action>
                        <action behavior="FI_Bullet" id="0" name="Set speed" sid="927876819092699" type="Impact_Generic">
                            <param id="0" name="Speed">Family_Item.Projectile_Speed</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="973343419328489" type="Impact_Generic">
                            <param id="0" name="Instance variable">MakeDamage</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-10" name="Set value" sid="141224123841149" type="Impact_Generic">
                            <param id="0" name="Instance variable">Impact_PushImpact</param>
                            <param id="1" name="Value">int(Family_Item.Projectile_PushImpact)</param>
                        </action>
                        <action id="-10" name="Set value" sid="316771976281180" type="Impact_Generic">
                            <param id="0" name="Instance variable">Impact_Damage</param>
                            <param id="1" name="Value">int(Family_Item.Projectile_Damage)</param>
                        </action>
                        <action id="-10" name="Set value" sid="614635516253122" type="Impact_Generic">
                            <param id="0" name="Instance variable">Impact_Damage</param>
                            <param id="1" name="Value">int(Impact_Generic.Impact_Damage * Family_Character.BonusDamageMult)</param>
                        </action>
                        <action id="-10" name="Set value" sid="819359479931259" type="Impact_Generic">
                            <param id="0" name="Instance variable">Impact_CollitionFunction</param>
                            <param id="1" name="Value">Family_Item.Projectile_CollitionFunction</param>
                        </action>
                        <action id="-10" name="Set value" sid="639074055785667" type="Impact_Generic">
                            <param id="0" name="Instance variable">Blast_Animation</param>
                            <param id="1" name="Value">Family_Item.Explote_Animation</param>
                        </action>
                        <action id="-10" name="Set value" sid="157066414359379" type="Impact_Generic">
                            <param id="0" name="Instance variable">Blast_Damage</param>
                            <param id="1" name="Value">Family_Item.Explote_Damage</param>
                        </action>
                        <action id="-10" name="Set value" sid="681476388508723" type="Impact_Generic">
                            <param id="0" name="Instance variable">Blast_PushImpact</param>
                            <param id="1" name="Value">Family_Item.Explote_PushImpact</param>
                        </action>
                        <action id="-10" name="Set value" sid="332372070807731" type="Impact_Generic">
                            <param id="0" name="Instance variable">Blast_Duration</param>
                            <param id="1" name="Value">Family_Item.Explote_Duration</param>
                        </action>
                        <action id="-10" name="Set value" sid="446262264898154" type="Impact_Generic">
                            <param id="0" name="Instance variable">Blast_Speed</param>
                            <param id="1" name="Value">Family_Item.Explote_Speed</param>
                        </action>
                        <action id="-10" name="Set value" sid="845978034828600" type="Impact_Generic">
                            <param id="0" name="Instance variable">Blast_RecoilTime</param>
                            <param id="1" name="Value">Family_Item.Explote_RecoilTime</param>
                        </action>
                        <action id="-10" name="Set value" sid="620647983862537" type="Impact_Generic">
                            <param id="0" name="Instance variable">Blast_AmmoXShoot</param>
                            <param id="1" name="Value">Family_Item.Explote_AmmoXShoot</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="644995630328611" type="Impact_Generic">
                            <param id="0" name="Instance variable">DodgeJump</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="525554166392414">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="436757329199127" type="Family_Item">
                                    <param id="0" name="Instance variable">Projectile_PierceCharacters</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" sid="923034714575186" type="Impact_Generic">
                                    <param id="0" name="Instance variable">Impact_PierceCharacters</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="668332949719876">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="138631018873601" type="Family_Item">
                                    <param id="0" name="Instance variable">Projectile_PierceWalls</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" sid="770349298382437" type="Impact_Generic">
                                    <param id="0" name="Instance variable">Impact_PierceWalls</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="789407093974812">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="199271753835259" type="Family_Item">
                                    <param id="0" name="Instance variable">Explote_PierceCharacters</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" sid="199924830766341" type="Impact_Generic">
                                    <param id="0" name="Instance variable">Blast_PierceCharacters</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="667554495052107">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="514897333081526" type="Family_Item">
                                    <param id="0" name="Instance variable">Explote_PierceWalls</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" sid="206022071169431" type="Impact_Generic">
                                    <param id="0" name="Instance variable">Blast_PierceWalls</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="759679763608419">
            <conditions>
                <condition id="0" name="On function" sid="972145847598084" type="Function">
                    <param id="0" name="Name">&quot;SpawnExplote&quot;</param>
                </condition>
                <condition id="-14" name="Pick by unique ID" sid="844138527169129" type="Family_Impact">
                    <param id="0" name="Unique ID">Function.Param(0)</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="601249864126232">
                    <conditions>
                        <condition id="-10" name="For" sid="767228119995600" type="System">
                            <param id="0" name="Name">&quot;BlastAmmoXShoot&quot;</param>
                            <param id="1" name="Start index">0</param>
                            <param id="2" name="End index">Family_Impact.Blast_AmmoXShoot - 1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Spawn another object" sid="425885989778280" type="Family_Impact">
                            <param id="0" name="Object">Explote_Generic</param>
                            <param id="1" name="Layer">&quot;Characters&quot;</param>
                            <param id="2" name="Image point">1</param>
                        </action>
                        <action id="4" name="Set animation" sid="761678011453115" type="Explote_Generic">
                            <param id="0" name="Animation">Family_Impact.Blast_Animation</param>
                            <param id="1" name="From">1</param>
                        </action>
                        <action id="-10" name="Set value" sid="254455873164075" type="Explote_Generic">
                            <param id="0" name="Instance variable">Group</param>
                            <param id="1" name="Value">Family_Impact.Group</param>
                        </action>
                        <action id="-10" name="Set value" sid="411295864757888" type="Explote_Generic">
                            <param id="0" name="Instance variable">TypeObject</param>
                            <param id="1" name="Value">&quot;Projectile&quot;</param>
                        </action>
                        <action behavior="Timer" id="0" name="Start timer" sid="280309211634004" type="Explote_Generic">
                            <param id="0" name="Duration">Family_Impact.Blast_Duration</param>
                            <param id="1" name="Type">0</param>
                            <param id="2" name="Tag">&quot;Destroy&quot;</param>
                        </action>
                        <action id="-8" name="Set angle" sid="784061273448823" type="Explote_Generic">
                            <param id="0" name="Angle">180 + Family_Impact.Angle + ((30*int((loopindex+1)/2)) * (loopindex % 2 = 0 ? -1 : 1))</param>
                        </action>
                        <action behavior="FI_Bullet" id="3" name="Set angle of motion" sid="595922489250256" type="Explote_Generic">
                            <param id="0" name="Angle">180 + Family_Impact.Angle + ((30*int((loopindex+1)/2)) * (loopindex % 2 = 0 ? -1 : 1))</param>
                        </action>
                        <action behavior="FI_Bullet" id="0" name="Set speed" sid="764646121775589" type="Explote_Generic">
                            <param id="0" name="Speed">Family_Impact.Blast_Speed</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="382538664736523" type="Explote_Generic">
                            <param id="0" name="Instance variable">MakeDamage</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-10" name="Set value" sid="885613781589250" type="Explote_Generic">
                            <param id="0" name="Instance variable">Impact_PushImpact</param>
                            <param id="1" name="Value">int(Family_Impact.Blast_PushImpact)</param>
                        </action>
                        <action id="-10" name="Set value" sid="593120468172450" type="Explote_Generic">
                            <param id="0" name="Instance variable">Impact_Damage</param>
                            <param id="1" name="Value">int(Family_Impact.Blast_Damage)</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="391281822645187" type="Explote_Generic">
                            <param id="0" name="Instance variable">DodgeJump</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="214484574819914">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="918937351450825" type="Family_Impact">
                                    <param id="0" name="Instance variable">Blast_PierceCharacters</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" sid="379798900862825" type="Explote_Generic">
                                    <param id="0" name="Instance variable">Impact_PierceCharacters</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="969133302975971">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="937014656956498" type="Family_Impact">
                                    <param id="0" name="Instance variable">Blast_PierceWalls</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" sid="646629341307693" type="Explote_Generic">
                                    <param id="0" name="Instance variable">Impact_PierceWalls</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <comment>HEARTH</comment>
        <event-block sid="425304371161602">
            <conditions>
                <condition id="1" name="Is overlapping another object" sid="914876900116603" type="PlayerCoreBox">
                    <param id="0" name="Object">Item_Potion</param>
                </condition>
            </conditions>
            <actions>
                <action id="-10" name="Set value" sid="877936792978580" type="PlayerCoreBox">
                    <param id="0" name="Instance variable">Hp</param>
                    <param id="1" name="Value">PlayerCoreBox.HPMax</param>
                </action>
                <action id="0" name="Call function" sid="703027044307616" type="Function">
                    <param id="0" name="Name">&quot;PlayEffectSoundAudio&quot;</param>
                    <param id="1" name="Parameter {n}">&quot;Heart&quot;</param>
                </action>
                <action id="-9" name="Destroy" sid="184362761187232" type="Item_Potion" />
            </actions>
        </event-block>
        <event-block sid="213410378755283">
            <conditions>
                <condition id="1" name="Is overlapping another object" sid="588465207618440" type="PlayerCoreBox">
                    <param id="0" name="Object">Item_Coin</param>
                </condition>
            </conditions>
            <actions>
                <action id="-11" name="Add to" sid="962983824456071" type="PlayerCoreBox">
                    <param id="0" name="Instance variable">Coins</param>
                    <param id="1" name="Value">Item_Coin.CoinGain</param>
                </action>
                <action id="9" name="Remove dungeon element" sid="686586536435730" type="RandomDungeonMaker">
                    <param id="0" name="ElementId">Item_Coin.Element_ID</param>
                </action>
                <action id="-9" name="Destroy" sid="425728899798213" type="Item_Coin" />
            </actions>
        </event-block>
        <comment>Ammo reload cooldown</comment>
        <event-block sid="622360804128041">
            <conditions>
                <condition behavior="FO_Timer" id="0" name="On timer" sid="287527538003120" type="Family_Item">
                    <param id="0" name="Tag">&quot;AmmoCooldown&quot;</param>
                </condition>
                <condition id="-7" name="Compare instance variable" sid="146862694450150" type="Family_Item">
                    <param id="0" name="Instance variable">Projectile_AmmoSize</param>
                    <param id="1" name="Comparison">3</param>
                    <param id="2" name="Value">Family_Item.Projectile_AmmoSizeMax - Family_Item.Projectile_AmmoXCooldown</param>
                </condition>
            </conditions>
            <actions>
                <action id="-11" name="Add to" sid="653304318394923" type="Family_Item">
                    <param id="0" name="Instance variable">Projectile_AmmoSize</param>
                    <param id="1" name="Value">Family_Item.Projectile_AmmoXCooldown</param>
                </action>
                <action behavior="FO_Timer" id="0" name="Start timer" sid="965426839517095" type="Family_Item">
                    <param id="0" name="Duration">Family_Item.Projectile_TimeXCooldown</param>
                    <param id="1" name="Type">0</param>
                    <param id="2" name="Tag">&quot;AmmoCooldown&quot;</param>
                </action>
            </actions>
        </event-block>
    </events>
</c2eventsheet>
